(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Ball, Coord, Game, Player, game;

console.log('hello phaser');

Coord = (function() {
  function Coord(x, y) {
    this.x = x;
    this.y = y;
  }

  return Coord;

})();

Player = (function() {
  function Player(game, id, avatar) {
    this.game = game;
    this.id = id;
    this.avatar = avatar;
    this.bucket = this.game.plateforms.create(0, 0, 'ground');
    this.bucket.physicsBodyType = Phaser.Physics.P2JS;
    this.bucket.playerParent = this;
    this.bucket.scale.setTo(0.3, 2);
    this.bucket.body.immovable = true;
    this.score = 0;
    this.scoreText = null;
  }

  Player.prototype.captureBall = function(ball) {
    ball.kill();
    this.score += 10;
    return this.displayScore();
  };

  Player.prototype.displayScore = function() {
    return this.scoreText.setText("player " + this.id + ": " + this.score);
  };

  return Player;

})();

Ball = (function() {
  function Ball(balls, coord, score, type) {
    var star;
    this.balls = balls;
    this.coord = coord;
    this.score = score;
    this.type = type;
    star = this.balls.create(this.coord, 0, 'star');
  }

  return Ball;

})();

Game = (function() {
  var GameStatus;

  GameStatus = {
    INIT: 1,
    RUNNING: 2,
    SCORE: 3
  };

  function Game(status, players) {
    var self;
    this.status = status;
    this.players = players;
    this.balls = null;
    this.plateforms = null;
    this.walls = null;
    this.players = [];
    self = this;
    this.phaser = new Phaser.Game(1200, 680, Phaser.AUTO, '', {
      preload: (function() {
        return self.preload();
      }),
      create: (function() {
        return self.create();
      }),
      update: (function() {
        return self.update();
      }),
      render: (function() {
        return self.render();
      })
    });
  }

  Game.prototype.generate_fake_player = function() {
    var i, x, y, _i, _results;
    x = y = 0;
    _results = [];
    for (i = _i = 0; _i <= 4; i = ++_i) {
      _results.push(this.players.push(new Player(this, i, null)));
    }
    return _results;
  };

  Game.prototype.generate_fake_balls = function() {
    var ball, i, rd, _i, _results;
    _results = [];
    for (i = _i = 0; _i <= 12; i = ++_i) {
      rd = Math.random();
      if (0.95 < rd) {
        ball = new Ball(this.balls, i * 80, 10, 'facecat');
        _results.push(ball.physicsBodyType = Phaser.Physics.P2JS);
      } else {
        _results.push(void 0);
      }
    }
    return _results;
  };

  Game.prototype.set_players_position = function() {
    var max_space_player, nbr_player, player, pointer, _i, _len, _ref, _results;
    nbr_player = this.players.length;
    max_space_player = this.phaser.width / (nbr_player + 1);
    _ref = this.players;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      player = _ref[_i];
      player.bucket.width = max_space_player - 10;
      pointer = max_space_player + player.id * max_space_player - (max_space_player / 2);
      player.bucket.x = max_space_player + player.id * max_space_player - (max_space_player / 2);
      player.bucket.y = this.phaser.world.height - 64;
      _results.push(player.scoreText = this.phaser.add.text(pointer, 16, '', {
        font: '32px arial',
        fill: '#fff'
      }));
    }
    return _results;
  };

  Game.prototype.preload = function() {
    console.log(':preload');
    this.phaser.load.image('sky', '/assets/images/sky.png');
    this.phaser.load.image('ground', '/assets/images/platform.png');
    this.phaser.load.image('star', '/assets/images/star.png');
    return this.phaser.load.image('wall', '/assets/images/star.png');
  };

  Game.prototype.create = function() {
    console.log(':create');
    this.phaser.physics.startSystem(Phaser.Physics.P2JS);
    this.phaser.physics.p2.gravity.y = 500;
    this.phaser.add.sprite(0, 0, 'sky');
    this.plateforms = this.phaser.add.group();
    this.plateforms.enableBody = true;
    this.generate_fake_player();
    this.set_players_position();
    this.balls = this.phaser.add.group();
    this.balls.enableBody = true;
    this.balls.physicsBodyType = Phaser.Physics.P2JS;
    this.walls = this.phaser.add.group();
    this.walls.enableBody = true;
    this.walls.physicsBodyType = Phaser.Physics.P2JS;
    this.new_line = new Phaser.Line(0, 0, 0, 0);
    return this.phaser.input.onDown.add(this.click, this);
  };

  Game.prototype.collectBalls = function(plateform, ball) {
    return plateform.playerParent.captureBall(ball);
  };

  Game.prototype.buildWall = function(wall) {
    var angle, dist_x, dist_y, wall_length, wall_sprite;
    console.log(wall);
    dist_y = Math.abs(wall.y1 - wall.y2);
    dist_x = Math.abs(wall.x1 - wall.x2);
    wall_length = Math.sqrt(dist_y * dist_y + dist_x * dist_x);
    angle = Math.atan2(dist_y, dist_x) * (180 / 3.14);
    if (wall.y1 - wall.y2 > 0) {
      angle = -angle;
    }
    wall_sprite = this.walls.create(wall.x1, wall.y1, 'ground');
    wall_sprite.width = wall_length;
    wall_sprite.height = 20;
    wall_sprite.angle = angle;
    this.phaser.physics.p2.enable(wall_sprite, false);
    wall_sprite.body.fixedRotation = true;
    wall_sprite.body.mass = 0;
    wall_sprite.body.data.motionState = p2.Body.STATIC;
    wall_sprite.body.data.gravityScale = 0;
    return console.log(wall_sprite);
  };

  Game.prototype.update = function() {
    this.generate_fake_balls();
    if (this.dragging) {
      if (this.phaser.input.activePointer.isDown) {
        return this.new_line.end.set(this.phaser.input.activePointer.x, this.phaser.input.activePointer.y);
      } else {
        this.dragging = false;
        this.buildWall({
          'x1': this.new_line.start.x,
          'y1': this.new_line.start.y,
          'x2': this.new_line.end.x,
          'y2': this.new_line.end.y
        });
        return console.log('push line !');
      }
    }
  };

  Game.prototype.render = function() {};

  Game.prototype.click = function(pointer) {
    this.dragging = true;
    return this.new_line.start.set(pointer.x, pointer.y);
  };

  return Game;

})();

game = new Game();


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9lcGkvQnVyZWF1L1NhdmVUaGVJbnRlcm5ldC9jbGllbnQvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL2hvbWUvZXBpL0J1cmVhdS9TYXZlVGhlSW50ZXJuZXQvY2xpZW50L3NjcmlwdHMvY29mZmVlL2FwcC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLCtCQUFBOztBQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksY0FBWixDQUFBLENBQUE7O0FBQUE7QUFLaUIsRUFBQSxlQUFFLENBQUYsRUFBTSxDQUFOLEdBQUE7QUFBVSxJQUFULElBQUMsQ0FBQSxJQUFBLENBQVEsQ0FBQTtBQUFBLElBQUwsSUFBQyxDQUFBLElBQUEsQ0FBSSxDQUFWO0VBQUEsQ0FBYjs7ZUFBQTs7SUFMSixDQUFBOztBQUFBO0FBUWlCLEVBQUEsZ0JBQUUsSUFBRixFQUFTLEVBQVQsRUFBYyxNQUFkLEdBQUE7QUFDVCxJQURVLElBQUMsQ0FBQSxPQUFBLElBQ1gsQ0FBQTtBQUFBLElBRGlCLElBQUMsQ0FBQSxLQUFBLEVBQ2xCLENBQUE7QUFBQSxJQURzQixJQUFDLENBQUEsU0FBQSxNQUN2QixDQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQWpCLENBQXdCLENBQXhCLEVBQTJCLENBQTNCLEVBQThCLFFBQTlCLENBQVYsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxlQUFSLEdBQTBCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFEekMsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxZQUFSLEdBQXVCLElBRnZCLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxNQUFNLENBQUMs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LENBQUMsS0FBSyxDQUFDLGFBQWEsQ0FBQyxDQUE5QyxFQUFpRCxJQUFDLENBQUEsTUFBTSxDQUFDLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FBN0UsRUFERjtPQUFBLE1BQUE7QUFJRSxRQUFBLElBQUMsQ0FBQSxRQUFELEdBQVksS0FBWixDQUFBO0FBQUEsUUFDQSxJQUFDLENBQUEsU0FBRCxDQUFXO0FBQUEsVUFDUCxJQUFBLEVBQU0sSUFBQyxDQUFBLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FEZjtBQUFBLFVBRVAsSUFBQSxFQUFNLElBQUMsQ0FBQSxRQUFRLENBQUMsS0FBSyxDQUFDLENBRmY7QUFBQSxVQUdQLElBQUEsRUFBTSxJQUFDLENBQUEsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUhiO0FBQUEsVUFJUCxJQUFBLEVBQU0sSUFBQyxDQUFBLFFBQVEsQ0FBQyxHQUFHLENBQUMsQ0FKYjtTQUFYLENBREEsQ0FBQTtlQU9BLE9BQU8sQ0FBQyxHQUFSLENBQVksYUFBWixFQVhGO09BREo7S0FOTTtFQUFBLENBL0dSLENBQUE7O0FBQUEsaUJBbUlBLE1BQUEsR0FBUSxTQUFBLEdBQUEsQ0FuSVIsQ0FBQTs7QUFBQSxpQkFxSUEsS0FBQSxHQUFPLFNBQUMsT0FBRCxHQUFBO0FBQ0wsSUFBQSxJQUFDLENBQUEsUUFBRCxHQUFZLElBQVosQ0FBQTtXQUNBLElBQUMsQ0FBQSxRQUFRLENBQUMsS0FBSyxDQUFDLEdBQWhCLENBQW9CLE9BQU8sQ0FBQyxDQUE1QixFQUErQixPQUFPLENBQUMsQ0FBdkMsRUFGSztFQUFBLENBcklQLENBQUE7O2NBQUE7O0lBaENKLENBQUE7O0FBQUEsSUF5S0EsR0FBVyxJQUFBLElBQUEsQ0FBQSxDQXpLWCxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25zb2xlLmxvZyAnaGVsbG8gcGhhc2VyJ1xuXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY2xhc3MgQ29vcmRcbiAgICBjb25zdHJ1Y3RvcjogKEB4LCBAeSkgLT5cblxuY2xhc3MgUGxheWVyXG4gICAgY29uc3RydWN0b3I6IChAZ2FtZSwgQGlkLCBAYXZhdGFyKSAtPlxuICAgICAgICBAYnVja2V0ID0gQGdhbWUucGxhdGVmb3Jtcy5jcmVhdGUgMCwgMCwgJ2dyb3VuZCdcbiAgICAgICAgQGJ1Y2tldC5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5QMkpTXG4gICAgICAgIEBidWNrZXQucGxheWVyUGFyZW50ID0gdGhpc1xuICAgICAgICBAYnVja2V0LnNjYWxlLnNldFRvIDAuMywgMlxuICAgICAgICBAYnVja2V0LmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZVxuICAgICAgICAjQGJ1Y2tldC5ib2R5LmNvbGlkZXMoQGdhbWUuYmFsbHMsIEBjYXB0dXJlQmFsbClcbiAgICAgICAgQHNjb3JlID0gMFxuICAgICAgICBAc2NvcmVUZXh0ID0gbnVsbFxuXG4gICAgY2FwdHVyZUJhbGw6IChiYWxsKSAtPlxuICAgICAgICBiYWxsLmtpbGwoKVxuICAgICAgICBAc2NvcmUgKz0gMTBcbiAgICAgICAgQGRpc3BsYXlTY29yZSgpXG5cbiAgICBkaXNwbGF5U2NvcmU6ICgpIC0+XG4gICAgICAgIEBzY29yZVRleHQuc2V0VGV4dCBcInBsYXllciAje0BpZH06ICN7QHNjb3JlfVwiXG5cbmNsYXNzIEJhbGxcbiAgICBjb25zdHJ1Y3RvcjogKEBiYWxscywgQGNvb3JkLCBAc2NvcmUsIEB0eXBlKSAtPlxuICAgICAgICBzdGFyID0gQGJhbGxzLmNyZWF0ZSBAY29vcmQsIDAsICdzdGFyJ1xuXG5cbmNsYXNzIEdhbWVcbiAgICBHYW1lU3RhdHVzID1cbiAgICAgICAgSU5JVCA6IDFcbiAgICAgICAgUlVOTklORyA6IDJcbiAgICAgICAgU0NPUkUgOiAzXG5cbiAgICBjb25zdHJ1Y3RvcjogKEBzdGF0dXMsIEBwbGF5ZXJzKSAtPlxuICAgICAgICAjIGJhc2ljIGNvbmZpZ1xuICAgICAgICBAYmFsbHMgPSBudWxsXG4gICAgICAgIEBwbGF0ZWZvcm1zID0gbnVsbFxuICAgICAgICBAd2FsbHMgPSBudWxsXG4gICAgICAgIEBwbGF5ZXJzID0gW11cbiAgICAgICAgIyBHZW5lcmF0ZSB0aGUgd29yZFxuICAgICAgICBzZWxmID0gdGhpc1xuICAgICAgICBAcGhhc2VyID0gbmV3IFBoYXNlci5HYW1lKFxuICAgICAgICAgICAgMTIwMCxcbiAgICAgICAgICAgIDY4MCxcbiAgICAgICAgICAgIFBoYXNlci5BVVRPLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBwcmVsb2FkOiggLT4gc2VsZi5wcmVsb2FkKCkpLFxuICAgICAgICAgICAgY3JlYXRlOiAoIC0+IHNlbGYuY3JlYXRlKCkpLFxuICAgICAgICAgICAgdXBkYXRlOiAoLT4gc2VsZi51cGRhdGUoKSksXG4gICAgICAgICAgICByZW5kZXI6ICgtPiBzZWxmLnJlbmRlcigpKVxuICAgICAgICApXG4gICAgICAgICNAc29ja2V0ID0gc29ja2V0XG4gICAgICAgICNAc29ja2V0Lm9uKCduZXcgcGxheWVyJywgKChkYXRhKSAtPiBjb25zb2xlLmxvZyBkYXRhKSlcbiAgICAgICAgI0Bzb2NrZXQub24oJ2NoYXJhY3RlciBzcGF3bmVkJywgKChkYXRhKSAtPiBjb25zb2xlLmxvZyBkYXRhKSlcbiAgICAgICAgI0Bzb2NrZXQub24oJ2dhbWUgc3RvcCcsICgtPiBjb25zb2xlLmxvZyBcIkdBTUUgU1RPUFwiICkpXG5cblxuICAgIGdlbmVyYXRlX2Zha2VfcGxheWVyOiAoKSAtPlxuICAgICAgICB4ID0geSA9IDBcbiAgICAgICAgZm9yIGkgaW4gWzAuLjRdXG4gICAgICAgICAgICBAcGxheWVycy5wdXNoKG5ldyBQbGF5ZXIodGhpcywgaSwgbnVsbCkpXG5cbiAgICBnZW5lcmF0ZV9mYWtlX2JhbGxzOiAoKSAtPlxuICAgICAgICBmb3IgaSBpbiBbMC4uMTJdXG4gICAgICAgICAgICByZCA9IE1hdGgucmFuZG9tKClcbiAgICAgICAgICAgIGlmIDAuOTUgIDwgcmRcbiAgICAgICAgICAgICAgICBiYWxsID0gbmV3IEJhbGwoQGJhbGxzLCBpKjgwLCAxMCwgJ2ZhY2VjYXQnKVxuICAgICAgICAgICAgICAgIGJhbGwucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuUDJKU1xuXG4gICAgc2V0X3BsYXllcnNfcG9zaXRpb246ICgpIC0+XG4gICAgICAgIG5icl9wbGF5ZXIgPSBAcGxheWVycy5sZW5ndGhcbiAgICAgICAgbWF4X3NwYWNlX3BsYXllciA9IEBwaGFzZXIud2lkdGggLyAobmJyX3BsYXllciArIDEpXG4gICAgICAgIGZvciBwbGF5ZXIgIGluIEBwbGF5ZXJzXG4gICAgICAgICAgICBwbGF5ZXIuYnVja2V0LndpZHRoID0gbWF4X3NwYWNlX3BsYXllciAtIDEwXG4gICAgICAgICAgICBwb2ludGVyID0gbWF4X3NwYWNlX3BsYXllciArIHBsYXllci5pZCAqIG1heF9zcGFjZV9wbGF5ZXIgLSAobWF4X3NwYWNlX3BsYXllciAvIDIpXG4gICAgICAgICAgICBwbGF5ZXIuYnVja2V0LnggPSAgbWF4X3NwYWNlX3BsYXllciArIHBsYXllci5pZCAqIG1heF9zcGFjZV9wbGF5ZXIgLSAobWF4X3NwYWNlX3BsYXllciAvIDIpXG4gICAgICAgICAgICBwbGF5ZXIuYnVja2V0LnkgPSAgQHBoYXNlci53b3JsZC5oZWlnaHQgLSA2NFxuICAgICAgICAgICAgcGxheWVyLnNjb3JlVGV4dCA9IEBwaGFzZXIuYWRkLnRleHQgcG9pbnRlciwgMTYsICcnLCBmb250OiAnMzJweCBhcmlhbCcsIGZpbGw6ICcjZmZmJ1xuXG5cbiAgICBwcmVsb2FkOiAoKSAtPlxuICAgICAgY29uc29sZS5sb2cgJzpwcmVsb2FkJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICdza3knLCAnL2Fzc2V0cy9pbWFnZXMvc2t5LnBuZydcbiAgICAgIEBwaGFzZXIubG9hZC5pbWFnZSAnZ3JvdW5kJywgJy9hc3NldHMvaW1hZ2VzL3BsYXRmb3JtLnBuZydcbiAgICAgIEBwaGFzZXIubG9hZC5pbWFnZSAnc3RhcicsICcvYXNzZXRzL2ltYWdlcy9zdGFyLnBuZydcbiAgICAgIEBwaGFzZXIubG9hZC5pbWFnZSAnd2FsbCcsICcvYXNzZXRzL2ltYWdlcy9zdGFyLnBuZydcblxuICAgIGNyZWF0ZTogKCkgLT5cbiAgICAgIGNvbnNvbGUubG9nICc6Y3JlYXRlJ1xuICAgICAgQHBoYXNlci5waHlzaWNzLnN0YXJ0U3lzdGVtIFBoYXNlci5QaHlzaWNzLlAySlNcbiAgICAgIEBwaGFzZXIucGh5c2ljcy5wMi5ncmF2aXR5LnkgPSA1MDBcbiAgICAgIEBwaGFzZXIuYWRkLnNwcml0ZSAwLCAwLCAnc2t5J1xuXG4gICAgICBAcGxhdGVmb3JtcyA9IEBwaGFzZXIuYWRkLmdyb3VwKClcbiAgICAgIEBwbGF0ZWZvcm1zLmVuYWJsZUJvZHkgPSB0cnVlXG5cbiAgICAgIEBnZW5lcmF0ZV9mYWtlX3BsYXllcigpXG5cbiAgICAgIEBzZXRfcGxheWVyc19wb3NpdGlvbigpXG5cbiAgICAgICNjdXJzb3JzID0gQHBoYXNlci5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKClcbiAgICAgIEBiYWxscyA9IEBwaGFzZXIuYWRkLmdyb3VwKClcbiAgICAgIEBiYWxscy5lbmFibGVCb2R5ID0gdHJ1ZVxuICAgICAgQGJhbGxzLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLlAySlNcblxuICAgICAgQHdhbGxzID0gQHBoYXNlci5hZGQuZ3JvdXAoKVxuICAgICAgQHdhbGxzLmVuYWJsZUJvZHkgPSB0cnVlXG4gICAgICBAd2FsbHMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuUDJKU1xuXG4gICAgICBAbmV3X2xpbmUgPSBuZXcgUGhhc2VyLkxpbmUgMCwgMCwgMCwgMFxuICAgICAgQHBoYXNlci5pbnB1dC5vbkRvd24uYWRkKEBjbGljaywgdGhpcylcblxuXG4gICAgY29sbGVjdEJhbGxzOiAocGxhdGVmb3JtLCBiYWxsKSAtPlxuICAgICAgcGxhdGVmb3JtLnBsYXllclBhcmVudC5jYXB0dXJlQmFsbChiYWxsKVxuXG4gICAgYnVpbGRXYWxsOiAod2FsbCkgLT5cbiAgICAgICAgY29uc29sZS5sb2cgd2FsbFxuICAgICAgICBkaXN0X3kgPSBNYXRoLmFicyh3YWxsLnkxIC0gd2FsbC55MilcbiAgICAgICAgZGlzdF94ID0gTWF0aC5hYnMod2FsbC54MSAtIHdhbGwueDIpXG4gICAgICAgIHdhbGxfbGVuZ3RoID0gTWF0aC5zcXJ0KGRpc3RfeSAqIGRpc3RfeSArIGRpc3RfeCAqIGRpc3RfeClcbiAgICAgICAgYW5nbGUgPSBNYXRoLmF0YW4yKCBkaXN0X3ksICBkaXN0X3gpICogKDE4MC8zLjE0KVxuICAgICAgICBpZiAod2FsbC55MSAtIHdhbGwueTIgPiAwKVxuICAgICAgICAgICAgYW5nbGUgPSAtIGFuZ2xlXG5cbiAgICAgICAgd2FsbF9zcHJpdGUgPSBAd2FsbHMuY3JlYXRlICB3YWxsLngxLCB3YWxsLnkxLCAnZ3JvdW5kJ1xuICAgICAgICB3YWxsX3Nwcml0ZS53aWR0aCA9IHdhbGxfbGVuZ3RoXG4gICAgICAgIHdhbGxfc3ByaXRlLmhlaWdodCA9IDIwXG4gICAgICAgIHdhbGxfc3ByaXRlLmFuZ2xlID0gYW5nbGVcbiAgICAgICAgQHBoYXNlci5waHlzaWNzLnAyLmVuYWJsZSh3YWxsX3Nwcml0ZSwgZmFsc2UpXG4gICAgICAgICNkZWJ1Z2dlclxuICAgICAgICB3YWxsX3Nwcml0ZS5ib2R5LmZpeGVkUm90YXRpb24gPSB0cnVlXG4gICAgICAgIHdhbGxfc3ByaXRlLmJvZHkubWFzcyA9IDBcbiAgICAgICAgd2FsbF9zcHJpdGUuYm9keS5kYXRhLm1vdGlvblN0YXRlID0gcDIuQm9keS5TVEFUSUNcblxuICAgICAgICB3YWxsX3Nwcml0ZS5ib2R5LmRhdGEuZ3Jhdml0eVNjYWxlID0gMFxuICAgICAgICAjd2FsbF9wcml0ZS5ib2R5LmltbW92YWJsZSA9IHRydWVcbiAgICAgICAgY29uc29sZS5sb2cgd2FsbF9zcHJpdGVcblxuICAgIHVwZGF0ZTogKCkgLT5cbiAgICAgICNAcGhhc2VyLnBoeXNpY3MuYXJjYWRlLm92ZXJsYXAgQHBsYXRlZm9ybXMsIEBiYWxscywgQGNvbGxlY3RCYWxscywgbnVsbCwgdGhpc1xuICAgICAgI0BwaGFzZXIucGh5c2ljcy5hcmNhZGUuY29sbGlkZSBAYmFsbHMsIEB3YWxsc1xuXG4gICAgICBAZ2VuZXJhdGVfZmFrZV9iYWxscygpXG5cbiAgICAgIGlmIEBkcmFnZ2luZ1xuICAgICAgICAgIGlmIEBwaGFzZXIuaW5wdXQuYWN0aXZlUG9pbnRlci5pc0Rvd25cbiAgICAgICAgICAgIEBuZXdfbGluZS5lbmQuc2V0IEBwaGFzZXIuaW5wdXQuYWN0aXZlUG9pbnRlci54LCBAcGhhc2VyLmlucHV0LmFjdGl2ZVBvaW50ZXIueVxuXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGRyYWdnaW5nID0gZmFsc2VcbiAgICAgICAgICAgIEBidWlsZFdhbGwoe1xuICAgICAgICAgICAgICAgICd4MSc6IEBuZXdfbGluZS5zdGFydC54LFxuICAgICAgICAgICAgICAgICd5MSc6IEBuZXdfbGluZS5zdGFydC55LFxuICAgICAgICAgICAgICAgICd4Mic6IEBuZXdfbGluZS5lbmQueCxcbiAgICAgICAgICAgICAgICAneTInOiBAbmV3X2xpbmUuZW5kLnlcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICBjb25zb2xlLmxvZyAncHVzaCBsaW5lICEnXG5cbiAgICByZW5kZXI6ICgpIC0+XG5cbiAgICBjbGljazogKHBvaW50ZXIpIC0+XG4gICAgICBAZHJhZ2dpbmcgPSB0cnVlXG4gICAgICBAbmV3X2xpbmUuc3RhcnQuc2V0IHBvaW50ZXIueCwgcG9pbnRlci55XG5cbmdhbWUgPSBuZXcgR2FtZSgpXG4iXX0=
