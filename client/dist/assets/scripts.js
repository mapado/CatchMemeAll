(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Ball, Coord, Game, Player;

console.log('hello phaser');

Coord = (function() {
  function Coord(x, y) {
    this.x = x;
    this.y = y;
  }

  return Coord;

})();

Player = (function() {
  function Player(game, id, avatar, name, position, score) {
    var max_space_player, nbr_player, pointer, x, y;
    this.game = game;
    this.id = id;
    this.avatar = avatar;
    this.name = name;
    this.position = position;
    this.score = score;
    nbr_player = 5;
    max_space_player = this.game.phaser.width / (nbr_player + 1);
    pointer = max_space_player + this.position * max_space_player - (max_space_player / 2);
    x = max_space_player + this.position * max_space_player - (max_space_player / 2);
    y = this.game.phaser.world.height - 25;
    this.bucket = this.game.buckets.create(x, y, 'cloud');
    this.bucket.width = max_space_player - 10;
    this.bucket.body.data.motionState = p2.Body.STATIC;
    this.bucket.body.uuid = this.id;
    this.bucket.playerParent = this;
    this.bucket.scale.setTo(0.3, 2);
    this.scoreText = this.game.phaser.add.text(pointer, 16, '', {
      font: '32px arial',
      fill: '#fff'
    });
    console.log(id, avatar, name, position);
  }

  Player.prototype.addScore = function(score) {
    this.score += score;
    return this.scoreText.setText("player " + this.id + ": " + this.score);
  };

  return Player;

})();

Ball = (function() {
  function Ball(game, coord, score, type) {
    this.game = game;
    this.coord = coord;
    this.score = score;
    this.type = type;
    this.ball = this.game.balls.create(this.coord, 0, type);
    this.ball.physicsBodyType = Phaser.Physics.P2JS;
    this.ball.body.onBeginContact.add(this.captureBall, this);
  }

  Ball.prototype.captureBall = function(k) {
    if (k.sprite.key === 'cloud') {
      this.game.players[k.uuid].addScore(this.score);
      return this.ball.kill();
    }
  };

  return Ball;

})();

Game = (function() {
  function Game(initPlayers) {
    var self;
    this.initPlayers = initPlayers;
    this.players = [];
    this.balls = null;
    this.buckets = null;
    this.colliders = null;
    self = this;
    this.phaser = new Phaser.Game(1200, 680, Phaser.AUTO, 'game', {
      preload: (function() {
        return self.preload();
      }),
      create: (function() {
        return self.create();
      }),
      update: (function() {
        return self.update();
      }),
      render: (function() {
        return self.render();
      })
    });
    this.socket = socket;
    this.socket.on('new player', (function(data) {
      return console.log(data);
    }));
    this.socket.on('character spawned', (function(data) {
      console.log(data.name);
      new Ball(self, data.startX * self.phaser.width, data.score, data.name);
    }));
    this.socket.on('game stop', (function(data) {
      console.log(data);
    }));

  }

  Game.prototype.preload = function() {
    console.log(':preload');
    this.phaser.load.image('sky', '/assets/images/sky.png');
    this.phaser.load.image('cloud', '/assets/images/cloud1.png');
    this.phaser.load.image('Facebook', '/assets/images/fb-evil.png');
    this.phaser.load.image('Cat', '/assets/images/nyancat.png');
    //this.phaser.load.image('Cat', '/assets/images/cat.png');
    this.phaser.load.image('Unicorn', '/assets/images/unicorn.png');
    this.phaser.load.image('Trollface', '/assets/images/trollface.png');
    return this.phaser.load.image('collider', '/assets/images/circle.png');
  };

  Game.prototype.create = function() {
    var p, _i, _len, _ref;
    console.log(':create');
    this.phaser.physics.startSystem(Phaser.Physics.P2JS);
    this.phaser.physics.p2.gravity.y = 50;
    this.phaser.add.sprite(0, 0, 'sky');
    this.buckets = this.phaser.add.group();
    this.buckets.enableBody = true;
    this.buckets.physicsBodyType = Phaser.Physics.P2JS;
    _ref = this.initPlayers.playerList;
    console.log(_ref);
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      p = _ref[_i];
      this.players[p.id] = new Player(this, p.id, p.avatar, p.name, p.position, p.score);
    }
    this.balls = this.phaser.add.group();
    this.balls.enableBody = true;
    this.balls.physicsBodyType = Phaser.Physics.P2JS;
    this.colliders = this.phaser.add.group();
    this.colliders.enableBody = true;
    this.colliders.physicsBodyType = Phaser.Physics.P2JS;
    this.new_line = new Phaser.Line(0, 0, 0, 0);

    socket.on('', function() {

    });

    return this.phaser.input.onDown.add(this.click, this);
  };

  Game.prototype.collectBalls = function(plateform, ball) {
    return plateform.playerParent.captureBall(ball);
  };

  Game.prototype.buildCollider = function(collider) {
    var collider_sprite;
    collider_sprite = this.colliders.create(collider.x, collider.y, 'collider');
    this.phaser.physics.p2.enable(collider_sprite, false);
    collider_sprite.body.data.motionState = p2.Body.STATIC;
    return collider_sprite.body.data.gravityScale = 0;
  };

  Game.prototype.update = function() {

  };

  Game.prototype.render = function() {};

  Game.prototype.click = function(pointer) {
    return this.buildCollider(pointer);
  };

  return Game;

})();

window.Game = Game;


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9lcGkvQnVyZWF1L1NhdmVUaGVJbnRlcm5ldC9jbGllbnQvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL2hvbWUvZXBpL0J1cmVhdS9TYXZlVGhlSW50ZXJuZXQvY2xpZW50L3NjcmlwdHMvY29mZmVlL2FwcC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLHlCQUFBOztBQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksY0FBWixDQUFBLENBQUE7O0FBQUE7QUFLaUIsRUFBQSxlQUFFLENBQUYsRUFBTSxDQUFOLEdBQUE7QUFBVSxJQUFULElBQUMsQ0FBQSxJQUFBLENBQVEsQ0FBQTtBQUFBLElBQUwsSUFBQyxDQUFBLElBQUEsQ0FBSSxDQUFWO0VBQUEsQ0FBYjs7ZUFBQTs7SUFMSixDQUFBOztBQUFBO0FBUWlCLEVBQUEsZ0JBQUUsSUFBRixFQUFTLEVBQVQsRUFBYyxNQUFkLEVBQXVCLElBQXZCLEVBQThCLFFBQTlCLEVBQXlDLEtBQXpDLEdBQUE7QUFDVCxRQUFBLDJDQUFBO0FBQUEsSUFEVSxJQUFDLENBQUEsT0FBQSxJQUNYLENBQUE7QUFBQSxJQURpQixJQUFDLENBQUEsS0FBQSxFQUNsQixDQUFBO0FBQUEsSUFEc0IsSUFBQyxDQUFBLFNBQUEsTUFDdkIsQ0FBQTtBQUFBLElBRCtCLElBQUMsQ0FBQSxPQUFBLElBQ2hDLENBQUE7QUFBQSxJQURzQyxJQUFDLENBQUEsV0FBQSxRQUN2QyxDQUFBO0FBQUEsSUFEaUQsSUFBQyxDQUFBLFFBQUEsS0FDbEQsQ0FBQTtBQUFBLElBQUEsVUFBQSxHQUFhLENBQWIsQ0FBQTtBQUFBLElBQ0EsZ0JBQUEsR0FBbUIsSUFBQyxDQUFBLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBYixHQUFxQixDQUFDLFVBQUEs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LENBbEZSLENBQUE7O0FBQUEsaUJBb0ZBLEtBQUEsR0FBTyxTQUFDLE9BQUQsR0FBQTtXQUNILElBQUMsQ0FBQSxhQUFELENBQWUsT0FBZixFQURHO0VBQUEsQ0FwRlAsQ0FBQTs7Y0FBQTs7SUEzQ0osQ0FBQTs7QUFBQSxNQWtJTSxDQUFDLElBQVAsR0FBYyxJQWxJZCxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCJjb25zb2xlLmxvZyAnaGVsbG8gcGhhc2VyJ1xuXG5cbiMtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuY2xhc3MgQ29vcmRcbiAgICBjb25zdHJ1Y3RvcjogKEB4LCBAeSkgLT5cblxuY2xhc3MgUGxheWVyXG4gICAgY29uc3RydWN0b3I6IChAZ2FtZSwgQGlkLCBAYXZhdGFyLCBAbmFtZSwgQHBvc2l0aW9uLCBAc2NvcmUpIC0+XG4gICAgICAgIG5icl9wbGF5ZXIgPSA1XG4gICAgICAgIG1heF9zcGFjZV9wbGF5ZXIgPSBAZ2FtZS5waGFzZXIud2lkdGggLyAobmJyX3BsYXllciArIDEpXG4gICAgICAgIGNvbnNvbGUubG9nIFwiYmlzb3VzIGJpc291c1wiLCBAcG9zaXRpb25cbiAgICAgICAgcG9pbnRlciA9IG1heF9zcGFjZV9wbGF5ZXIgKyBAcG9zaXRpb24gKiBtYXhfc3BhY2VfcGxheWVyIC0gKG1heF9zcGFjZV9wbGF5ZXIgLyAyKVxuXG4gICAgICAgIHggPSAgbWF4X3NwYWNlX3BsYXllciArIEBwb3NpdGlvbiAqIG1heF9zcGFjZV9wbGF5ZXIgLSAobWF4X3NwYWNlX3BsYXllciAvIDIpXG4gICAgICAgIHkgPSAgQGdhbWUucGhhc2VyLndvcmxkLmhlaWdodCAtIDI1XG5cbiAgICAgICAgQGJ1Y2tldCA9IEBnYW1lLmJ1Y2tldHMuY3JlYXRlIHgsIHksICdjbG91ZCdcbiAgICAgICAgQGJ1Y2tldC53aWR0aCA9IG1heF9zcGFjZV9wbGF5ZXIgLSAxMFxuICAgICAgICBAYnVja2V0LmJvZHkuZGF0YS5tb3Rpb25TdGF0ZSA9IHAyLkJvZHkuU1RBVElDXG4gICAgICAgIEBidWNrZXQuYm9keS51dWlkID0gQGlkXG4gICAgICAgIEBidWNrZXQucGxheWVyUGFyZW50ID0gdGhpc1xuICAgICAgICBAYnVja2V0LnNjYWxlLnNldFRvIDAuMywgMlxuICAgICAgICBAc2NvcmVUZXh0ID0gQGdhbWUucGhhc2VyLmFkZC50ZXh0IHBvaW50ZXIsIDE2LCAnJywgZm9udDogJzMycHggYXJpYWwnLCBmaWxsOiAnI2ZmZidcblxuICAgIGFkZFNjb3JlOiAoc2NvcmUpIC0+XG4gICAgICAgIEBzY29yZSArPSBzY29yZVxuICAgICAgICBAc2NvcmVUZXh0LnNldFRleHQgXCJwbGF5ZXIgI3tAaWR9OiAje0BzY29yZX1cIlxuXG5jbGFzcyBCYWxsXG4gICAgY29uc3RydWN0b3I6IChAZ2FtZSwgQGNvb3JkLCBAc2NvcmUsIEB0eXBlKSAtPlxuICAgICAgICBAYmFsbCA9IEBnYW1lLmJhbGxzLmNyZWF0ZSBAY29vcmQsIDAsICdueWFuY2F0J1xuICAgICAgICBAYmFsbC5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5QMkpTXG5cbiAgICAgICAgQGJhbGwuYm9keS5vbkJlZ2luQ29udGFjdC5hZGQoQGNhcHR1cmVCYWxsLCB0aGlzKVxuXG4gICAgY2FwdHVyZUJhbGw6IChrKSAtPlxuICAgICAgICBpZiBrLnNwcml0ZS5rZXkgPT0gJ2Nsb3VkJ1xuICAgICAgICAgICAgQGdhbWUucGxheWVyc1trLnV1aWRdLmFkZFNjb3JlKEBzY29yZSlcbiAgICAgICAgICAgIEBiYWxsLmtpbGwoKVxuXG5jbGFzcyBHYW1lXG5cbiAgICBjb25zdHJ1Y3RvcjogKEBpbml0UGxheWVycykgLT5cblxuICAgICAgICAjIGJhc2ljIGNvbmZpZ1xuICAgICAgICBAYmFsbHMgPSBudWxsXG4gICAgICAgIEBidWNrZXRzID0gbnVsbFxuICAgICAgICBAY29sbGlkZXJzID0gbnVsbFxuICAgICAgICAjIEdlbmVyYXRlIHRoZSB3b3JkXG4gICAgICAgIHNlbGYgPSB0aGlzXG4gICAgICAgIEBwaGFzZXIgPSBuZXcgUGhhc2VyLkdhbWUoXG4gICAgICAgICAgICAxMjAwLFxuICAgICAgICAgICAgNjgwLFxuICAgICAgICAgICAgUGhhc2VyLkFVVE8sXG4gICAgICAgICAgICAnZ2FtZScsXG4gICAgICAgICAgICBwcmVsb2FkOiggLT4gc2VsZi5wcmVsb2FkKCkpLFxuICAgICAgICAgICAgY3JlYXRlOiAoIC0+IHNlbGYuY3JlYXRlKCkpLFxuICAgICAgICAgICAgdXBkYXRlOiAoLT4gc2VsZi51cGRhdGUoKSksXG4gICAgICAgICAgICByZW5kZXI6ICgtPiBzZWxmLnJlbmRlcigpKVxuICAgICAgICApXG4gICAgICAgIEBzb2NrZXQgPSBzb2NrZXRcbiAgICAgICAgQHNvY2tldC5vbignbmV3IHBsYXllcicsICgoZGF0YSkgLT4gY29uc29sZS5sb2cgZGF0YSkpXG4gICAgICAgIEBzb2NrZXQub24oJ2NoYXJhY3RlciBzcGF3bmVkJywgKChkYXRhKSAtPiBjb25zb2xlLmxvZyBkYXRhKSlcbiAgICAgICAgQHNvY2tldC5vbignZ2FtZSBzdG9wJywgKC0+IGNvbnNvbGUubG9nIFwiR0FNRSBTVE9QXCIgKSlcblxuXG4gICAgZ2VuZXJhdGVfZmFrZV9iYWxsczogKCkgLT5cbiAgICAgICAgZm9yIGkgaW4gWzAuLjEyXVxuICAgICAgICAgICAgcmQgPSBNYXRoLnJhbmRvbSgpXG4gICAgICAgICAgICBpZiAwLjk1ICA8IHJkXG4gICAgICAgICAgICAgICAgYmFsbCA9IG5ldyBCYWxsKHRoaXMsIGkqODAsIDEwLCAnZmFjZWNhdCcpXG5cblxuICAgIHByZWxvYWQ6ICgpIC0+XG4gICAgICBjb25zb2xlLmxvZyAnOnByZWxvYWQnXG4gICAgICBAcGhhc2VyLmxvYWQuaW1hZ2UgJ3NreScsICcvYXNzZXRzL2ltYWdlcy9za3kucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICdjbG91ZCcsICcvYXNzZXRzL2ltYWdlcy9jbG91ZDEucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICdmYl9ldmlsJywgJy9hc3NldHMvaW1hZ2VzL2ZiLWV2aWwucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICdhbGxfdGhlX3RoaW5ncycsICcvYXNzZXRzL2ltYWdlcy9hbGx0aGV0aGluZ3MucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICdueWFuY2F0JywgJy9hc3NldHMvaW1hZ2VzL255YW5jYXQucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICd1bmljb3JuJywgJy9hc3NldHMvaW1hZ2VzL3VuaWNvcm4ucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICd0cm9sbGZhY2UnLCAnL2Fzc2V0cy9pbWFnZXMvdHJvbGxmYWNlLnBuZydcbiAgICAgIEBwaGFzZXIubG9hZC5pbWFnZSAnbm9wZScsICcvYXNzZXRzL2ltYWdlcy9ub3BlLnBuZydcbiAgICAgIEBwaGFzZXIubG9hZC5pbWFnZSAnY29sbGlkZXInLCAnL2Fzc2V0cy9pbWFnZXMvY2lyY2xlLnBuZydcblxuICAgIGNyZWF0ZTogKCkgLT5cbiAgICAgICAgY29uc29sZS5sb2cgJzpjcmVhdGUnXG4gICAgICAgIEBwaGFzZXIucGh5c2ljcy5zdGFydFN5c3RlbSBQaGFzZXIuUGh5c2ljcy5QMkpTXG4gICAgICAgIEBwaGFzZXIucGh5c2ljcy5wMi5ncmF2aXR5LnkgPSAyMDBcbiAgICAgICAgQHBoYXNlci5hZGQuc3ByaXRlIDAsIDAsICdza3knXG5cbiAgICAgICAgQGJ1Y2tldHMgPSBAcGhhc2VyLmFkZC5ncm91cCgpXG4gICAgICAgIEBidWNrZXRzLmVuYWJsZUJvZHkgPSB0cnVlXG4gICAgICAgIEBidWNrZXRzLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLlAySlNcblxuXG4gICAgICAgIGZvciBwIGluIEBpbml0UGxheWVycy5wbGF5ZXJMaXN0XG4gICAgICAgICAgICBAcGxheWVyc1twLmlkXSA9IG5ldyBQbGF5ZXIodGhpcywgcC5pZCwgcC5hdmF0YXIsIHAubmFtZSwgcC5wb3NpdGlvbiwgcC5zY29yZSApXG5cbiAgICAgICAgQGJhbGxzID0gQHBoYXNlci5hZGQuZ3JvdXAoKVxuICAgICAgICBAYmFsbHMuZW5hYmxlQm9keSA9IHRydWVcbiAgICAgICAgQGJhbGxzLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLlAySlNcblxuICAgICAgICBAY29sbGlkZXJzID0gQHBoYXNlci5hZGQuZ3JvdXAoKVxuICAgICAgICBAY29sbGlkZXJzLmVuYWJsZUJvZHkgPSB0cnVlXG4gICAgICAgIEBjb2xsaWRlcnMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuUDJKU1xuXG4gICAgICAgIEBuZXdfbGluZSA9IG5ldyBQaGFzZXIuTGluZSAwLCAwLCAwLCAwXG4gICAgICAgIEBwaGFzZXIuaW5wdXQub25Eb3duLmFkZChAY2xpY2ssIHRoaXMpXG5cblxuICAgIGNvbGxlY3RCYWxsczogKHBsYXRlZm9ybSwgYmFsbCkgLT5cbiAgICAgIHBsYXRlZm9ybS5wbGF5ZXJQYXJlbnQuY2FwdHVyZUJhbGwoYmFsbClcblxuICAgIGJ1aWxkQ29sbGlkZXI6IChjb2xsaWRlcikgLT5cbiAgICAgICAgY29sbGlkZXJfc3ByaXRlID0gQGNvbGxpZGVycy5jcmVhdGUgIGNvbGxpZGVyLngsIGNvbGxpZGVyLnksICdjb2xsaWRlcidcbiAgICAgICAgQHBoYXNlci5waHlzaWNzLnAyLmVuYWJsZShjb2xsaWRlcl9zcHJpdGUsIGZhbHNlKVxuICAgICAgICBjb2xsaWRlcl9zcHJpdGUuYm9keS5kYXRhLm1vdGlvblN0YXRlID0gcDIuQm9keS5TVEFUSUNcbiAgICAgICAgY29sbGlkZXJfc3ByaXRlLmJvZHkuZGF0YS5ncmF2aXR5U2NhbGUgPSAwXG5cbiAgICB1cGRhdGU6ICgpIC0+XG4gICAgICBAZ2VuZXJhdGVfZmFrZV9iYWxscygpXG5cblxuICAgIHJlbmRlcjogKCkgLT5cblxuICAgIGNsaWNrOiAocG9pbnRlcikgLT5cbiAgICAgICAgQGJ1aWxkQ29sbGlkZXIocG9pbnRlcilcblxud2luZG93LkdhbWUgPSBHYW1lXG4iXX0=
