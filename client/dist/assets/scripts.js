(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Ball, Coord, Game, Player, game;

console.log('hello phaser');

Coord = (function() {
  function Coord(x, y) {
    this.x = x;
    this.y = y;
  }

  return Coord;

})();

Player = (function() {
  function Player(game, id, avatar) {
    this.game = game;
    this.id = id;
    this.avatar = avatar;
    this.bucket = this.game.plateforms.create(0, 0, 'ground');
    this.bucket.physicsBodyType = Phaser.Physics.P2JS;
    this.bucket.playerParent = this;
    this.bucket.scale.setTo(0.3, 2);
    this.bucket.body.immovable = true;
    this.score = 0;
    this.scoreText = null;
  }

  Player.prototype.captureBall = function(ball) {
    ball.kill();
    this.score += 10;
    return this.displayScore();
  };

  Player.prototype.displayScore = function() {
    return this.scoreText.setText("player " + this.id + ": " + this.score);
  };

  return Player;

})();

Ball = (function() {
  function Ball(balls, coord, score, type) {
    var star;
    this.balls = balls;
    this.coord = coord;
    this.score = score;
    this.type = type;
    star = this.balls.create(this.coord, 0, 'star');
  }

  return Ball;

})();

Game = (function() {
  var GameStatus;

  GameStatus = {
    INIT: 1,
    RUNNING: 2,
    SCORE: 3
  };

  function Game(status, players) {
    var self;
    this.status = status;
    this.players = players;
    this.balls = null;
    this.plateforms = null;
    this.walls = null;
    this.players = [];
    self = this;
    this.phaser = new Phaser.Game(1200, 680, Phaser.AUTO, '', {
      preload: (function() {
        return self.preload();
      }),
      create: (function() {
        return self.create();
      }),
      update: (function() {
        return self.update();
      }),
      render: (function() {
        return self.render();
      })
    });
  }

  Game.prototype.generate_fake_player = function() {
    var i, x, y, _i, _results;
    x = y = 0;
    _results = [];
    for (i = _i = 0; _i <= 4; i = ++_i) {
      _results.push(this.players.push(new Player(this, i, null)));
    }
    return _results;
  };

  Game.prototype.generate_fake_balls = function() {
    var ball, i, rd, _i, _results;
    _results = [];
    for (i = _i = 0; _i <= 12; i = ++_i) {
      rd = Math.random();
      if (0.95 < rd) {
        ball = new Ball(this.balls, i * 80, 10, 'facecat');
        _results.push(ball.physicsBodyType = Phaser.Physics.P2JS);
      } else {
        _results.push(void 0);
      }
    }
    return _results;
  };

  Game.prototype.set_players_position = function() {
    var max_space_player, nbr_player, player, pointer, _i, _len, _ref, _results;
    nbr_player = this.players.length;
    max_space_player = this.phaser.width / (nbr_player + 1);
    _ref = this.players;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      player = _ref[_i];
      player.bucket.width = max_space_player - 10;
      pointer = max_space_player + player.id * max_space_player - (max_space_player / 2);
      player.bucket.x = max_space_player + player.id * max_space_player - (max_space_player / 2);
      player.bucket.y = this.phaser.world.height - 64;
      _results.push(player.scoreText = this.phaser.add.text(pointer, 16, '', {
        font: '32px arial',
        fill: '#fff'
      }));
    }
    return _results;
  };

  Game.prototype.preload = function() {
    console.log(':preload');
    this.phaser.load.image('sky', '/assets/images/sky.png');
    this.phaser.load.image('ground', '/assets/images/platform.png');
    this.phaser.load.image('circle', '/assets/images/circle.png');
    this.phaser.load.image('star', '/assets/images/star.png');
    return this.phaser.load.image('wall', '/assets/images/star.png');
  };

  Game.prototype.create = function() {
    console.log(':create');
    this.phaser.physics.startSystem(Phaser.Physics.P2JS);
    this.phaser.physics.p2.gravity.y = 500;
    this.phaser.add.sprite(0, 0, 'sky');
    this.plateforms = this.phaser.add.group();
    this.plateforms.enableBody = true;
    this.generate_fake_player();
    this.set_players_position();
    this.balls = this.phaser.add.group();
    this.balls.enableBody = true;
    this.balls.physicsBodyType = Phaser.Physics.P2JS;
    this.walls = this.phaser.add.group();
    this.walls.enableBody = true;
    this.walls.physicsBodyType = Phaser.Physics.P2JS;
    this.new_line = new Phaser.Line(0, 0, 0, 0);
    return this.phaser.input.onDown.add(this.click, this);
  };

  Game.prototype.collectBalls = function(plateform, ball) {
    return plateform.playerParent.captureBall(ball);
  };

  Game.prototype.buildCircle = function(wall) {
    var wall_sprite;
    wall_sprite = this.walls.create(wall.x, wall.y, 'circle');
    this.phaser.physics.p2.enable(wall_sprite, false);
    wall_sprite.body.data.motionState = p2.Body.STATIC;
    return wall_sprite.body.data.gravityScale = 0;
  };

  Game.prototype.update = function() {
    this.generate_fake_balls();
    if (this.dragging) {
      return console.log('push line !');
    }
  };

  Game.prototype.render = function() {};

  Game.prototype.click = function(pointer) {
    return this.buildCircle(pointer);
  };

  return Game;

})();

game = new Game();


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9lcGkvQnVyZWF1L1NhdmVUaGVJbnRlcm5ldC9jbGllbnQvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL2hvbWUvZXBpL0J1cmVhdS9TYXZlVGhlSW50ZXJuZXQvY2xpZW50L3NjcmlwdHMvY29mZmVlL2FwcC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLCtCQUFBOztBQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksY0FBWixDQUFBLENBQUE7O0FBQUE7QUFLaUIsRUFBQSxlQUFFLENBQUYsRUFBTSxDQUFOLEdBQUE7QUFBVSxJQUFULElBQUMsQ0FBQSxJQUFBLENBQVEsQ0FBQTtBQUFBLElBQUwsSUFBQyxDQUFBLElBQUEsQ0FBSSxDQUFWO0VBQUEsQ0FBYjs7ZUFBQTs7SUFMSixDQUFBOztBQUFBO0FBUWlCLEVBQUEsZ0JBQUUsSUFBRixFQUFTLEVBQVQsRUFBYyxNQUFkLEdBQUE7QUFDVCxJQURVLElBQUMsQ0FBQSxPQUFBLElBQ1gsQ0FBQTtBQUFBLElBRGlCLElBQUMsQ0FBQSxLQUFBLEVBQ2xCLENBQUE7QUFBQSxJQURzQixJQUFDLENBQUEsU0FBQSxNQUN2QixDQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQWpCLENBQXdCLENBQXhCLEVBQTJCLENBQTNCLEVBQThCLFFBQTlCLENBQVYsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxlQUFSLEdBQTBCLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFEekMsQ0FBQTtBQUFBLElBRUEsSUFBQyxDQUFBLE1BQU0sQ0FBQyxZQUFSLEdBQXVCLElBRnZCLENBQUE7QUFBQSxJQUdBLElBQUMsQ0FBQSxNQUFNLENBQUMs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QUNOLElBQUEsSUFBQyxDQUFBLG1CQUFELENBQUEsQ0FBQSxDQUFBO0FBRUEsSUFBQSxJQUFHLElBQUMsQ0FBQSxRQUFKO2FBQ00sT0FBTyxDQUFDLEdBQVIsQ0FBWSxhQUFaLEVBRE47S0FITTtFQUFBLENBL0ZSLENBQUE7O0FBQUEsaUJBcUdBLE1BQUEsR0FBUSxTQUFBLEdBQUEsQ0FyR1IsQ0FBQTs7QUFBQSxpQkF1R0EsS0FBQSxHQUFPLFNBQUMsT0FBRCxHQUFBO1dBQ0gsSUFBQyxDQUFBLFdBQUQsQ0FBYSxPQUFiLEVBREc7RUFBQSxDQXZHUCxDQUFBOztjQUFBOztJQWhDSixDQUFBOztBQUFBLElBMElBLEdBQVcsSUFBQSxJQUFBLENBQUEsQ0ExSVgsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dGhyb3cgbmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKX12YXIgZj1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwoZi5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxmLGYuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiY29uc29sZS5sb2cgJ2hlbGxvIHBoYXNlcidcblxuXG4jLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cbmNsYXNzIENvb3JkXG4gICAgY29uc3RydWN0b3I6IChAeCwgQHkpIC0+XG5cbmNsYXNzIFBsYXllclxuICAgIGNvbnN0cnVjdG9yOiAoQGdhbWUsIEBpZCwgQGF2YXRhcikgLT5cbiAgICAgICAgQGJ1Y2tldCA9IEBnYW1lLnBsYXRlZm9ybXMuY3JlYXRlIDAsIDAsICdncm91bmQnXG4gICAgICAgIEBidWNrZXQucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuUDJKU1xuICAgICAgICBAYnVja2V0LnBsYXllclBhcmVudCA9IHRoaXNcbiAgICAgICAgQGJ1Y2tldC5zY2FsZS5zZXRUbyAwLjMsIDJcbiAgICAgICAgQGJ1Y2tldC5ib2R5LmltbW92YWJsZSA9IHRydWVcbiAgICAgICAgI0BidWNrZXQuYm9keS5jb2xpZGVzKEBnYW1lLmJhbGxzLCBAY2FwdHVyZUJhbGwpXG4gICAgICAgIEBzY29yZSA9IDBcbiAgICAgICAgQHNjb3JlVGV4dCA9IG51bGxcblxuICAgIGNhcHR1cmVCYWxsOiAoYmFsbCkgLT5cbiAgICAgICAgYmFsbC5raWxsKClcbiAgICAgICAgQHNjb3JlICs9IDEwXG4gICAgICAgIEBkaXNwbGF5U2NvcmUoKVxuXG4gICAgZGlzcGxheVNjb3JlOiAoKSAtPlxuICAgICAgICBAc2NvcmVUZXh0LnNldFRleHQgXCJwbGF5ZXIgI3tAaWR9OiAje0BzY29yZX1cIlxuXG5jbGFzcyBCYWxsXG4gICAgY29uc3RydWN0b3I6IChAYmFsbHMsIEBjb29yZCwgQHNjb3JlLCBAdHlwZSkgLT5cbiAgICAgICAgc3RhciA9IEBiYWxscy5jcmVhdGUgQGNvb3JkLCAwLCAnc3RhcidcblxuXG5jbGFzcyBHYW1lXG4gICAgR2FtZVN0YXR1cyA9XG4gICAgICAgIElOSVQgOiAxXG4gICAgICAgIFJVTk5JTkcgOiAyXG4gICAgICAgIFNDT1JFIDogM1xuXG4gICAgY29uc3RydWN0b3I6IChAc3RhdHVzLCBAcGxheWVycykgLT5cbiAgICAgICAgIyBiYXNpYyBjb25maWdcbiAgICAgICAgQGJhbGxzID0gbnVsbFxuICAgICAgICBAcGxhdGVmb3JtcyA9IG51bGxcbiAgICAgICAgQHdhbGxzID0gbnVsbFxuICAgICAgICBAcGxheWVycyA9IFtdXG4gICAgICAgICMgR2VuZXJhdGUgdGhlIHdvcmRcbiAgICAgICAgc2VsZiA9IHRoaXNcbiAgICAgICAgQHBoYXNlciA9IG5ldyBQaGFzZXIuR2FtZShcbiAgICAgICAgICAgIDEyMDAsXG4gICAgICAgICAgICA2ODAsXG4gICAgICAgICAgICBQaGFzZXIuQVVUTyxcbiAgICAgICAgICAgICcnLFxuICAgICAgICAgICAgcHJlbG9hZDooIC0+IHNlbGYucHJlbG9hZCgpKSxcbiAgICAgICAgICAgIGNyZWF0ZTogKCAtPiBzZWxmLmNyZWF0ZSgpKSxcbiAgICAgICAgICAgIHVwZGF0ZTogKC0+IHNlbGYudXBkYXRlKCkpLFxuICAgICAgICAgICAgcmVuZGVyOiAoLT4gc2VsZi5yZW5kZXIoKSlcbiAgICAgICAgKVxuICAgICAgICAjQHNvY2tldCA9IHNvY2tldFxuICAgICAgICAjQHNvY2tldC5vbignbmV3IHBsYXllcicsICgoZGF0YSkgLT4gY29uc29sZS5sb2cgZGF0YSkpXG4gICAgICAgICNAc29ja2V0Lm9uKCdjaGFyYWN0ZXIgc3Bhd25lZCcsICgoZGF0YSkgLT4gY29uc29sZS5sb2cgZGF0YSkpXG4gICAgICAgICNAc29ja2V0Lm9uKCdnYW1lIHN0b3AnLCAoLT4gY29uc29sZS5sb2cgXCJHQU1FIFNUT1BcIiApKVxuXG5cbiAgICBnZW5lcmF0ZV9mYWtlX3BsYXllcjogKCkgLT5cbiAgICAgICAgeCA9IHkgPSAwXG4gICAgICAgIGZvciBpIGluIFswLi40XVxuICAgICAgICAgICAgQHBsYXllcnMucHVzaChuZXcgUGxheWVyKHRoaXMsIGksIG51bGwpKVxuXG4gICAgZ2VuZXJhdGVfZmFrZV9iYWxsczogKCkgLT5cbiAgICAgICAgZm9yIGkgaW4gWzAuLjEyXVxuICAgICAgICAgICAgcmQgPSBNYXRoLnJhbmRvbSgpXG4gICAgICAgICAgICBpZiAwLjk1ICA8IHJkXG4gICAgICAgICAgICAgICAgYmFsbCA9IG5ldyBCYWxsKEBiYWxscywgaSo4MCwgMTAsICdmYWNlY2F0JylcbiAgICAgICAgICAgICAgICBiYWxsLnBoeXNpY3NCb2R5VHlwZSA9IFBoYXNlci5QaHlzaWNzLlAySlNcblxuICAgIHNldF9wbGF5ZXJzX3Bvc2l0aW9uOiAoKSAtPlxuICAgICAgICBuYnJfcGxheWVyID0gQHBsYXllcnMubGVuZ3RoXG4gICAgICAgIG1heF9zcGFjZV9wbGF5ZXIgPSBAcGhhc2VyLndpZHRoIC8gKG5icl9wbGF5ZXIgKyAxKVxuICAgICAgICBmb3IgcGxheWVyICBpbiBAcGxheWVyc1xuICAgICAgICAgICAgcGxheWVyLmJ1Y2tldC53aWR0aCA9IG1heF9zcGFjZV9wbGF5ZXIgLSAxMFxuICAgICAgICAgICAgcG9pbnRlciA9IG1heF9zcGFjZV9wbGF5ZXIgKyBwbGF5ZXIuaWQgKiBtYXhfc3BhY2VfcGxheWVyIC0gKG1heF9zcGFjZV9wbGF5ZXIgLyAyKVxuICAgICAgICAgICAgcGxheWVyLmJ1Y2tldC54ID0gIG1heF9zcGFjZV9wbGF5ZXIgKyBwbGF5ZXIuaWQgKiBtYXhfc3BhY2VfcGxheWVyIC0gKG1heF9zcGFjZV9wbGF5ZXIgLyAyKVxuICAgICAgICAgICAgcGxheWVyLmJ1Y2tldC55ID0gIEBwaGFzZXIud29ybGQuaGVpZ2h0IC0gNjRcbiAgICAgICAgICAgIHBsYXllci5zY29yZVRleHQgPSBAcGhhc2VyLmFkZC50ZXh0IHBvaW50ZXIsIDE2LCAnJywgZm9udDogJzMycHggYXJpYWwnLCBmaWxsOiAnI2ZmZidcblxuXG4gICAgcHJlbG9hZDogKCkgLT5cbiAgICAgIGNvbnNvbGUubG9nICc6cHJlbG9hZCdcbiAgICAgIEBwaGFzZXIubG9hZC5pbWFnZSAnc2t5JywgJy9hc3NldHMvaW1hZ2VzL3NreS5wbmcnXG4gICAgICBAcGhhc2VyLmxvYWQuaW1hZ2UgJ2dyb3VuZCcsICcvYXNzZXRzL2ltYWdlcy9wbGF0Zm9ybS5wbmcnXG4gICAgICBAcGhhc2VyLmxvYWQuaW1hZ2UgJ2NpcmNsZScsICcvYXNzZXRzL2ltYWdlcy9jaXJjbGUucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICdzdGFyJywgJy9hc3NldHMvaW1hZ2VzL3N0YXIucG5nJ1xuICAgICAgQHBoYXNlci5sb2FkLmltYWdlICd3YWxsJywgJy9hc3NldHMvaW1hZ2VzL3N0YXIucG5nJ1xuXG4gICAgY3JlYXRlOiAoKSAtPlxuICAgICAgY29uc29sZS5sb2cgJzpjcmVhdGUnXG4gICAgICBAcGhhc2VyLnBoeXNpY3Muc3RhcnRTeXN0ZW0gUGhhc2VyLlBoeXNpY3MuUDJKU1xuICAgICAgQHBoYXNlci5waHlzaWNzLnAyLmdyYXZpdHkueSA9IDUwMFxuICAgICAgQHBoYXNlci5hZGQuc3ByaXRlIDAsIDAsICdza3knXG5cbiAgICAgIEBwbGF0ZWZvcm1zID0gQHBoYXNlci5hZGQuZ3JvdXAoKVxuICAgICAgQHBsYXRlZm9ybXMuZW5hYmxlQm9keSA9IHRydWVcblxuICAgICAgQGdlbmVyYXRlX2Zha2VfcGxheWVyKClcblxuICAgICAgQHNldF9wbGF5ZXJzX3Bvc2l0aW9uKClcblxuICAgICAgI2N1cnNvcnMgPSBAcGhhc2VyLmlucHV0LmtleWJvYXJkLmNyZWF0ZUN1cnNvcktleXMoKVxuICAgICAgQGJhbGxzID0gQHBoYXNlci5hZGQuZ3JvdXAoKVxuICAgICAgQGJhbGxzLmVuYWJsZUJvZHkgPSB0cnVlXG4gICAgICBAYmFsbHMucGh5c2ljc0JvZHlUeXBlID0gUGhhc2VyLlBoeXNpY3MuUDJKU1xuXG4gICAgICBAd2FsbHMgPSBAcGhhc2VyLmFkZC5ncm91cCgpXG4gICAgICBAd2FsbHMuZW5hYmxlQm9keSA9IHRydWVcbiAgICAgIEB3YWxscy5waHlzaWNzQm9keVR5cGUgPSBQaGFzZXIuUGh5c2ljcy5QMkpTXG5cbiAgICAgIEBuZXdfbGluZSA9IG5ldyBQaGFzZXIuTGluZSAwLCAwLCAwLCAwXG4gICAgICBAcGhhc2VyLmlucHV0Lm9uRG93bi5hZGQoQGNsaWNrLCB0aGlzKVxuXG5cbiAgICBjb2xsZWN0QmFsbHM6IChwbGF0ZWZvcm0sIGJhbGwpIC0+XG4gICAgICBwbGF0ZWZvcm0ucGxheWVyUGFyZW50LmNhcHR1cmVCYWxsKGJhbGwpXG5cbiAgICBidWlsZENpcmNsZTogKHdhbGwpIC0+XG4gICAgICAgIHdhbGxfc3ByaXRlID0gQHdhbGxzLmNyZWF0ZSAgd2FsbC54LCB3YWxsLnksICdjaXJjbGUnXG4gICAgICAgIEBwaGFzZXIucGh5c2ljcy5wMi5lbmFibGUod2FsbF9zcHJpdGUsIGZhbHNlKVxuICAgICAgICB3YWxsX3Nwcml0ZS5ib2R5LmRhdGEubW90aW9uU3RhdGUgPSBwMi5Cb2R5LlNUQVRJQ1xuICAgICAgICB3YWxsX3Nwcml0ZS5ib2R5LmRhdGEuZ3Jhdml0eVNjYWxlID0gMFxuXG4gICAgdXBkYXRlOiAoKSAtPlxuICAgICAgQGdlbmVyYXRlX2Zha2VfYmFsbHMoKVxuXG4gICAgICBpZiBAZHJhZ2dpbmdcbiAgICAgICAgICAgIGNvbnNvbGUubG9nICdwdXNoIGxpbmUgISdcblxuICAgIHJlbmRlcjogKCkgLT5cblxuICAgIGNsaWNrOiAocG9pbnRlcikgLT5cbiAgICAgICAgQGJ1aWxkQ2lyY2xlKHBvaW50ZXIpXG5cbmdhbWUgPSBuZXcgR2FtZSgpXG4iXX0=
