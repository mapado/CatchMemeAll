(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
var Ball, Coord, Game, Player, game;

console.log('hello phaser');

Coord = (function() {
  function Coord(x, y) {
    this.x = x;
    this.y = y;
  }

  return Coord;

})();

Player = (function() {
  function Player(game, id, avatar) {
    this.game = game;
    this.id = id;
    this.avatar = avatar;
    this.bucket = this.game.plateforms.create(0, 0, 'ground');
    this.bucket.playerParent = this;
    this.bucket.enableBody = true;
    this.bucket.scale.setTo(0.3, 2);
    this.bucket.body.immovable = true;
    this.score = 0;
    this.scoreText = null;
  }

  Player.prototype.captureBall = function(ball) {
    ball.kill();
    this.score += 10;
    return this.displayScore();
  };

  Player.prototype.displayScore = function() {
    return this.scoreText.setText("player " + this.id + ": " + this.score);
  };

  return Player;

})();

Ball = (function() {
  function Ball(balls, coord, score, type) {
    var star;
    this.balls = balls;
    this.coord = coord;
    this.score = score;
    this.type = type;
    star = this.balls.create(this.coord, 0, 'star');
    star.body.gravity.y = 500;
    star.body.bounce.y = 0.7;
  }

  return Ball;

})();

Game = (function() {
  var GameStatus;

  GameStatus = {
    INIT: 1,
    RUNNING: 2,
    SCORE: 3
  };

  function Game(status, players) {
    var self;
    this.status = status;
    this.players = players;
    this.balls = null;
    this.plateforms = null;
    this.players = [];
    self = this;
    this.phaser = new Phaser.Game(1200, 680, Phaser.AUTO, '', {
      preload: (function() {
        return self.preload();
      }),
      create: (function() {
        return self.create();
      }),
      update: (function() {
        return self.update();
      }),
      render: (function() {
        return self.render();
      })
    });
    this.socket = io.connect('http://vader.mapado.com');
  }

  Game.prototype.generate_fake_player = function() {
    var i, x, y, _i, _results;
    x = y = 0;
    _results = [];
    for (i = _i = 0; _i <= 4; i = ++_i) {
      _results.push(this.players.push(new Player(this, i, null)));
    }
    return _results;
  };

  Game.prototype.generate_fake_balls = function() {
    var i, rd, _i, _results;
    _results = [];
    for (i = _i = 0; _i <= 12; i = ++_i) {
      rd = Math.random();
      if (0.95 < rd) {
        _results.push(new Ball(this.balls, i * 80, 10, 'facecat'));
      } else {
        _results.push(void 0);
      }
    }
    return _results;
  };

  Game.prototype.set_players_position = function() {
    var max_space_player, nbr_player, player, pointer, _i, _len, _ref, _results;
    nbr_player = this.players.length;
    max_space_player = this.phaser.width / (nbr_player + 1);
    _ref = this.players;
    _results = [];
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      player = _ref[_i];
      player.bucket.width = max_space_player - 10;
      pointer = max_space_player + player.id * max_space_player - (max_space_player / 2);
      player.bucket.x = max_space_player + player.id * max_space_player - (max_space_player / 2);
      player.bucket.y = this.phaser.world.height - 64;
      _results.push(player.scoreText = this.phaser.add.text(pointer, 16, '', {
        font: '32px arial',
        fill: '#fff'
      }));
    }
    return _results;
  };

  Game.prototype.preload = function() {
    console.log(':preload');
    this.phaser.load.image('sky', '/assets/images/sky.png');
    this.phaser.load.image('ground', '/assets/images/platform.png');
    return this.phaser.load.image('star', '/assets/images/star.png');
  };

  Game.prototype.create = function() {
    console.log(':create');
    this.phaser.add.sprite(0, 0, 'sky');
    this.plateforms = this.phaser.add.group();
    this.plateforms.enableBody = true;
    this.generate_fake_player();
    this.set_players_position();
    this.balls = this.phaser.add.group();
    this.balls.enableBody = true;
    this.new_line = new Phaser.Line(0, 0, 0, 0);
    return this.phaser.input.onDown.add(this.click, this);
  };

  Game.prototype.collectBalls = function(plateform, ball) {
    return plateform.playerParent.captureBall(ball);
  };

  Game.prototype.update = function() {
    this.phaser.physics.arcade.overlap(this.plateforms, this.balls, this.collectBalls, null, this);
    this.phaser.physics.arcade.collide(this.balls, this.new_line);
    this.generate_fake_balls();
    if (this.dragging) {
      if (this.phaser.input.activePointer.isDown) {
        return this.new_line.end.set(this.phaser.input.activePointer.x, this.phaser.input.activePointer.y);
      } else {
        this.dragging = false;
        return console.log('push line !');
      }
    }
  };

  Game.prototype.render = function() {
    this.phaser.debug.geom(this.new_line);
    return this.phaser.debug.rectangle(this.new_line);
  };

  Game.prototype.click = function(pointer) {
    this.dragging = true;
    return this.new_line.start.set(pointer.x, pointer.y);
  };

  return Game;

})();

game = new Game();


},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlcyI6WyIvaG9tZS9lcGkvQnVyZWF1L1NhdmVUaGVJbnRlcm5ldC9jbGllbnQvbm9kZV9tb2R1bGVzL2d1bHAtYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvYnJvd3Nlci1wYWNrL19wcmVsdWRlLmpzIiwiL2hvbWUvZXBpL0J1cmVhdS9TYXZlVGhlSW50ZXJuZXQvY2xpZW50L3NjcmlwdHMvY29mZmVlL2FwcC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQSxJQUFBLCtCQUFBOztBQUFBLE9BQU8sQ0FBQyxHQUFSLENBQVksY0FBWixDQUFBLENBQUE7O0FBQUE7QUFLaUIsRUFBQSxlQUFFLENBQUYsRUFBTSxDQUFOLEdBQUE7QUFBVSxJQUFULElBQUMsQ0FBQSxJQUFBLENBQVEsQ0FBQTtBQUFBLElBQUwsSUFBQyxDQUFBLElBQUEsQ0FBSSxDQUFWO0VBQUEsQ0FBYjs7ZUFBQTs7SUFMSixDQUFBOztBQUFBO0FBUWlCLEVBQUEsZ0JBQUUsSUFBRixFQUFTLEVBQVQsRUFBYyxNQUFkLEdBQUE7QUFDVCxJQURVLElBQUMsQ0FBQSxPQUFBLElBQ1gsQ0FBQTtBQUFBLElBRGlCLElBQUMsQ0FBQSxLQUFBLEVBQ2xCLENBQUE7QUFBQSxJQURzQixJQUFDLENBQUEsU0FBQSxNQUN2QixDQUFBO0FBQUEsSUFBQSxJQUFDLENBQUEsTUFBRCxHQUFVLElBQUMsQ0FBQSxJQUFJLENBQUMsVUFBVSxDQUFDLE1BQWpCLENBQXdCLENBQXhCLEVBQTJCLENBQTNCLEVBQThCLFFBQTlCLENBQVYsQ0FBQTtBQUFBLElBQ0EsSUFBQyxDQUFBLE1BQU0sQ0FBQyxZQUFSLEdBQXVCLElBRHZCLENBQUE7QUFBQSxJQUVBLElBQUMsQ0FBQSxNQUFNLENBQUMsVUFBUixHQUFxQixJQUZyQixDQUFBO0FBQUEsSUFHQSxJQUFDLENBQUEsTUFBTSxDQUFDLEtBQUssQ0FBQyxLQUFkLENBQW9C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Q0FBb0IsT0FBTyxDQUFDLENBQTVCLEVBQStCLE9BQU8sQ0FBQyxDQUF2QyxFQUZLO0VBQUEsQ0FqR1AsQ0FBQTs7Y0FBQTs7SUFqQ0osQ0FBQTs7QUFBQSxJQXNJQSxHQUFXLElBQUEsSUFBQSxDQUFBLENBdElYLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3Rocm93IG5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIil9dmFyIGY9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGYuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sZixmLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsImNvbnNvbGUubG9nICdoZWxsbyBwaGFzZXInXG5cblxuIy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5jbGFzcyBDb29yZFxuICAgIGNvbnN0cnVjdG9yOiAoQHgsIEB5KSAtPlxuXG5jbGFzcyBQbGF5ZXJcbiAgICBjb25zdHJ1Y3RvcjogKEBnYW1lLCBAaWQsIEBhdmF0YXIpIC0+XG4gICAgICAgIEBidWNrZXQgPSBAZ2FtZS5wbGF0ZWZvcm1zLmNyZWF0ZSAwLCAwLCAnZ3JvdW5kJ1xuICAgICAgICBAYnVja2V0LnBsYXllclBhcmVudCA9IHRoaXNcbiAgICAgICAgQGJ1Y2tldC5lbmFibGVCb2R5ID0gdHJ1ZVxuICAgICAgICBAYnVja2V0LnNjYWxlLnNldFRvIDAuMywgMlxuICAgICAgICBAYnVja2V0LmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZVxuICAgICAgICBAc2NvcmUgPSAwXG4gICAgICAgIEBzY29yZVRleHQgPSBudWxsXG5cbiAgICBjYXB0dXJlQmFsbDogKGJhbGwpIC0+XG4gICAgICAgIGJhbGwua2lsbCgpXG4gICAgICAgIEBzY29yZSArPSAxMFxuICAgICAgICBAZGlzcGxheVNjb3JlKClcblxuICAgIGRpc3BsYXlTY29yZTogKCkgLT5cbiAgICAgICAgQHNjb3JlVGV4dC5zZXRUZXh0IFwicGxheWVyICN7QGlkfTogI3tAc2NvcmV9XCJcblxuY2xhc3MgQmFsbFxuICAgIGNvbnN0cnVjdG9yOiAoQGJhbGxzLCBAY29vcmQsIEBzY29yZSwgQHR5cGUpIC0+XG4gICAgICAgIHN0YXIgPSBAYmFsbHMuY3JlYXRlIEBjb29yZCwgMCwgJ3N0YXInXG4gICAgICAgIHN0YXIuYm9keS5ncmF2aXR5LnkgPSA1MDBcbiAgICAgICAgc3Rhci5ib2R5LmJvdW5jZS55ID0gMC43XG5cblxuY2xhc3MgR2FtZVxuICAgIEdhbWVTdGF0dXMgPVxuICAgICAgICBJTklUIDogMVxuICAgICAgICBSVU5OSU5HIDogMlxuICAgICAgICBTQ09SRSA6IDNcblxuICAgIGNvbnN0cnVjdG9yOiAoQHN0YXR1cywgQHBsYXllcnMpIC0+XG4gICAgICAgICMgYmFzaWMgY29uZmlnXG4gICAgICAgIEBiYWxscyA9IG51bGxcbiAgICAgICAgQHBsYXRlZm9ybXMgPSBudWxsXG4gICAgICAgIEBwbGF5ZXJzID0gW11cbiAgICAgICAgIyBHZW5lcmF0ZSB0aGUgd29yZFxuICAgICAgICBzZWxmID0gdGhpc1xuICAgICAgICBAcGhhc2VyID0gbmV3IFBoYXNlci5HYW1lKFxuICAgICAgICAgICAgMTIwMCxcbiAgICAgICAgICAgIDY4MCxcbiAgICAgICAgICAgIFBoYXNlci5BVVRPLFxuICAgICAgICAgICAgJycsXG4gICAgICAgICAgICBwcmVsb2FkOiggLT4gc2VsZi5wcmVsb2FkKCkpLFxuICAgICAgICAgICAgY3JlYXRlOiAoIC0+IHNlbGYuY3JlYXRlKCkpLFxuICAgICAgICAgICAgdXBkYXRlOiAoLT4gc2VsZi51cGRhdGUoKSksXG4gICAgICAgICAgICByZW5kZXI6ICgtPiBzZWxmLnJlbmRlcigpKVxuICAgICAgICApXG5cbiAgICAgICAgQHNvY2tldCA9IGlvLmNvbm5lY3QgJ2h0dHA6Ly92YWRlci5tYXBhZG8uY29tJ1xuICAgICAgICAjQHNvY2tldC5vbignd2VsY29tZScsICAoKGRhdGEpIC0+IGNvbnNvbGUubG9nIGRhdGEpKVxuICAgICAgICAjQHNvY2tldC5vbignbmV3IHBsYXllcicsICgoZGF0YSkgLT4gY29uc29sZS5sb2cgZGF0YSkpXG4gICAgICAgICNAc29ja2V0Lm9uKCdjaGFyYWN0ZXIgc3Bhd25lZCcsICgoZGF0YSkgLT4gY29uc29sZS5sb2cgZGF0YSkpXG4gICAgICAgICNAc29ja2V0Lm9uKCdnYW1lIHN0b3AnLCAoLT4gY29uc29sZS5sb2cgXCJHQU1FIFNUT1BcIiApKVxuXG4gICAgZ2VuZXJhdGVfZmFrZV9wbGF5ZXI6ICgpIC0+XG4gICAgICAgIHggPSB5ID0gMFxuICAgICAgICBmb3IgaSBpbiBbMC4uNF1cbiAgICAgICAgICAgIEBwbGF5ZXJzLnB1c2gobmV3IFBsYXllcih0aGlzLCBpLCBudWxsKSlcblxuICAgIGdlbmVyYXRlX2Zha2VfYmFsbHM6ICgpIC0+XG4gICAgICAgIGZvciBpIGluIFswLi4xMl1cbiAgICAgICAgICAgIHJkID0gTWF0aC5yYW5kb20oKVxuICAgICAgICAgICAgaWYgMC45NSAgPCByZFxuICAgICAgICAgICAgICAgIG5ldyBCYWxsKEBiYWxscywgaSo4MCwgMTAsICdmYWNlY2F0JylcblxuICAgIHNldF9wbGF5ZXJzX3Bvc2l0aW9uOiAoKSAtPlxuICAgICAgICBuYnJfcGxheWVyID0gQHBsYXllcnMubGVuZ3RoXG4gICAgICAgIG1heF9zcGFjZV9wbGF5ZXIgPSBAcGhhc2VyLndpZHRoIC8gKG5icl9wbGF5ZXIgKyAxKVxuICAgICAgICBmb3IgcGxheWVyICBpbiBAcGxheWVyc1xuICAgICAgICAgICAgcGxheWVyLmJ1Y2tldC53aWR0aCA9IG1heF9zcGFjZV9wbGF5ZXIgLSAxMFxuICAgICAgICAgICAgcG9pbnRlciA9IG1heF9zcGFjZV9wbGF5ZXIgKyBwbGF5ZXIuaWQgKiBtYXhfc3BhY2VfcGxheWVyIC0gKG1heF9zcGFjZV9wbGF5ZXIgLyAyKVxuICAgICAgICAgICAgcGxheWVyLmJ1Y2tldC54ID0gIG1heF9zcGFjZV9wbGF5ZXIgKyBwbGF5ZXIuaWQgKiBtYXhfc3BhY2VfcGxheWVyIC0gKG1heF9zcGFjZV9wbGF5ZXIgLyAyKVxuICAgICAgICAgICAgcGxheWVyLmJ1Y2tldC55ID0gIEBwaGFzZXIud29ybGQuaGVpZ2h0IC0gNjRcbiAgICAgICAgICAgIHBsYXllci5zY29yZVRleHQgPSBAcGhhc2VyLmFkZC50ZXh0IHBvaW50ZXIsIDE2LCAnJywgZm9udDogJzMycHggYXJpYWwnLCBmaWxsOiAnI2ZmZidcblxuXG4gICAgcHJlbG9hZDogKCkgLT5cbiAgICAgIGNvbnNvbGUubG9nICc6cHJlbG9hZCdcbiAgICAgIEBwaGFzZXIubG9hZC5pbWFnZSAnc2t5JywgJy9hc3NldHMvaW1hZ2VzL3NreS5wbmcnXG4gICAgICBAcGhhc2VyLmxvYWQuaW1hZ2UgJ2dyb3VuZCcsICcvYXNzZXRzL2ltYWdlcy9wbGF0Zm9ybS5wbmcnXG4gICAgICBAcGhhc2VyLmxvYWQuaW1hZ2UgJ3N0YXInLCAnL2Fzc2V0cy9pbWFnZXMvc3Rhci5wbmcnXG5cbiAgICBjcmVhdGU6ICgpIC0+XG4gICAgICBjb25zb2xlLmxvZyAnOmNyZWF0ZSdcbiAgICAgIEBwaGFzZXIuYWRkLnNwcml0ZSAwLCAwLCAnc2t5J1xuXG4gICAgICBAcGxhdGVmb3JtcyA9IEBwaGFzZXIuYWRkLmdyb3VwKClcbiAgICAgIEBwbGF0ZWZvcm1zLmVuYWJsZUJvZHkgPSB0cnVlXG5cbiAgICAgIEBnZW5lcmF0ZV9mYWtlX3BsYXllcigpXG5cbiAgICAgIEBzZXRfcGxheWVyc19wb3NpdGlvbigpXG5cbiAgICAgICNjdXJzb3JzID0gQHBoYXNlci5pbnB1dC5rZXlib2FyZC5jcmVhdGVDdXJzb3JLZXlzKClcbiAgICAgIEBiYWxscyA9IEBwaGFzZXIuYWRkLmdyb3VwKClcbiAgICAgIEBiYWxscy5lbmFibGVCb2R5ID0gdHJ1ZVxuXG4gICAgICBAbmV3X2xpbmUgPSBuZXcgUGhhc2VyLkxpbmUgMCwgMCwgMCwgMFxuICAgICAgQHBoYXNlci5pbnB1dC5vbkRvd24uYWRkKEBjbGljaywgdGhpcylcblxuXG4gICAgY29sbGVjdEJhbGxzOiAocGxhdGVmb3JtLCBiYWxsKSAtPlxuICAgICAgcGxhdGVmb3JtLnBsYXllclBhcmVudC5jYXB0dXJlQmFsbChiYWxsKVxuXG4gICAgdXBkYXRlOiAoKSAtPlxuICAgICAgQHBoYXNlci5waHlzaWNzLmFyY2FkZS5vdmVybGFwIEBwbGF0ZWZvcm1zLCBAYmFsbHMsIEBjb2xsZWN0QmFsbHMsIG51bGwsIHRoaXNcbiAgICAgIEBwaGFzZXIucGh5c2ljcy5hcmNhZGUuY29sbGlkZSBAYmFsbHMsIEBuZXdfbGluZVxuXG4gICAgICBAZ2VuZXJhdGVfZmFrZV9iYWxscygpXG5cbiAgICAgIGlmIEBkcmFnZ2luZ1xuICAgICAgICAgIGlmIEBwaGFzZXIuaW5wdXQuYWN0aXZlUG9pbnRlci5pc0Rvd25cbiAgICAgICAgICAgIEBuZXdfbGluZS5lbmQuc2V0IEBwaGFzZXIuaW5wdXQuYWN0aXZlUG9pbnRlci54LCBAcGhhc2VyLmlucHV0LmFjdGl2ZVBvaW50ZXIueVxuXG4gICAgICAgICAgZWxzZVxuICAgICAgICAgICAgQGRyYWdnaW5nID0gZmFsc2VcbiAgICAgICAgICAgIGNvbnNvbGUubG9nICdwdXNoIGxpbmUgISdcblxuICAgIHJlbmRlcjogKCkgLT5cbiAgICAgIEBwaGFzZXIuZGVidWcuZ2VvbSBAbmV3X2xpbmVcbiAgICAgIEBwaGFzZXIuZGVidWcucmVjdGFuZ2xlIEBuZXdfbGluZVxuXG4gICAgY2xpY2s6IChwb2ludGVyKSAtPlxuICAgICAgQGRyYWdnaW5nID0gdHJ1ZVxuICAgICAgQG5ld19saW5lLnN0YXJ0LnNldCBwb2ludGVyLngsIHBvaW50ZXIueVxuXG5nYW1lID0gbmV3IEdhbWUoKVxuIl19
